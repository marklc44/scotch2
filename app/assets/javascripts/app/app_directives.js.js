// Generated by CoffeeScript 1.8.0
ScotchApp.directive("searchDirective", function() {
  return {
    restrict: "A",
    scope: true,
    template: "<h2>Hello {{results.currentPage}}</h2>"
  };
});

ScotchApp.directive("showRegionDesc", function() {
  return {
    restrict: "A",
    scope: {
      region: "="
    },
    templateUrl: "templates/region_modal.html"
  };
});

ScotchApp.directive("bubbleChart", function() {
  return {
    restrict: "A",
    scope: {
      data: "=bubble-data"
    },
    templateUrl: "templates/bubble_chart.html",
    link: (function(_this) {
      return function($scope, element) {
        var canvas, data, height, width, xAxis, xRange, yAxis, yRange;
        width = 600;
        height = 400;
        data = $scope.data;
        console.log(data);
        canvas = d3.select(element).append("svg").attr("width", width).attr("height", height).attr("class", "bubbles").append("g").attr("transform", "translate(50, 50)");
        xRange = d3.scale.linear().range([10, 250]).domain([
          d3.min(data, function(d) {
            return d.rating;
          }, d3.max(data, function(d) {
            return d.rating;
          }))
        ]);
        yRange = d3.scale.linear().range([20, 300]).domain([
          d3.min(data, function(d) {
            return d.age;
          }, d3.max(data, function(d) {
            return d.age;
          }))
        ]);
        xAxis = d3.svg.axis().scale(xRange);
        yAxis = d3.svg.axis().scale(yRange).orient('left');
        canvas.append('svg:g').call(xAxis).attr('transform', 'translate(0, 320)').attr('fill', '#999');
        canvas.append('svg:g').call(yAxis).attr('transform', 'translate(0, 0)').attr('fill', '#999');
        return d3.selectAll('g.tick').attr('font-size', '.85em');
      };
    })(this)
  };
});
