// Generated by CoffeeScript 1.8.0
var AppCtrls, ResultsCtrl, ShowWhiskyCtrl,
  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

AppCtrls = angular.module("AppCtrls", []);

ResultsCtrl = (function() {
  function ResultsCtrl(scope, Whisky, RegionsWhiskies) {
    this.scope = scope;
    this.Whisky = Whisky;
    this.RegionsWhiskies = RegionsWhiskies;
    this.setOffset = __bind(this.setOffset, this);
    this.setPage = __bind(this.setPage, this);
    this.hideRegionDescModal = __bind(this.hideRegionDescModal, this);
    this.showRegionDescModal = __bind(this.showRegionDescModal, this);
    this.getRegionWhiskies = __bind(this.getRegionWhiskies, this);
    this.getAllWhiskies = __bind(this.getAllWhiskies, this);
    this.whiskies = [];
    this.showRegionDesc = [];
    this.sortBy = '-rating';
    this.showChart = false;
    this.currentPage = 1;
    this.offset = 0;
    this.Whisky.query((function(_this) {
      return function(data) {
        console.log(data);
        return _this.whiskies = data;
      };
    })(this));
  }

  ResultsCtrl.prototype.getAllWhiskies = function() {
    return this.Whisky.query((function(_this) {
      return function(data) {
        console.log(data);
        return _this.whiskies = data;
      };
    })(this));
  };

  ResultsCtrl.prototype.getRegionWhiskies = function(region_id) {
    console.log("region clicked");
    return this.RegionsWhiskies.query({
      id: region_id
    }, (function(_this) {
      return function(data) {
        console.log("region-whiskies", data);
        _this.showRegionDescModal(region_id);
        return _this.whiskies = data;
      };
    })(this));
  };

  ResultsCtrl.prototype.showRegionDescModal = function(region_id) {
    this.showRegionDesc = [];
    this.showRegionDesc[region_id] = true;
    return console.log(this.showRegionDesc);
  };

  ResultsCtrl.prototype.hideRegionDescModal = function() {
    return this.showRegionDesc = [];
  };

  ResultsCtrl.prototype.setPage = function(pageNo) {
    console.log(pageNo);
    this.currentPage = pageNo;
    return this.setOffset();
  };

  ResultsCtrl.prototype.setOffset = function() {
    return this.offset = this.currentPage * 10;
  };

  return ResultsCtrl;

})();

ShowWhiskyCtrl = (function() {
  function ShowWhiskyCtrl(scope, Whisky, routeParams) {
    this.scope = scope;
    this.Whisky = Whisky;
    this.whisky = {};
    this.id = routeParams.id;
    this.Whisky.get({
      id: this.id
    }, (function(_this) {
      return function(data) {
        return _this.whisky = data;
      };
    })(this));
  }

  return ShowWhiskyCtrl;

})();

AppCtrls.controller("ResultsCtrl", ["$scope", "Whisky", "Region", "RegionsWhiskies", ResultsCtrl]);

AppCtrls.controller("ShowWhiskyCtrl", ["$scope", "Whisky", "$routeParams", ShowWhiskyCtrl]);
